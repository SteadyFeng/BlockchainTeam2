# ğŸ¥ åŒ»ç–—ä¿é™©åŒºå—é“¾ç³»ç»Ÿ - å®Œæ•´éƒ¨ç½²è¿è¡ŒæŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäºä»¥å¤ªåŠåŒºå—é“¾çš„åŒ»ç–—ä¿é™©ç³»ç»Ÿï¼ŒåŒ…å«ï¼š
- **æ™ºèƒ½åˆçº¦**ï¼š4ä¸ªç›¸äº’å…³è”çš„ Solidity åˆçº¦
- **å‰ç«¯åº”ç”¨**ï¼šReact + Vite + Material-UI æ„å»ºçš„ Web ç•Œé¢
- **å¼€å‘ç¯å¢ƒ**ï¼šTruffle + Ganache æœ¬åœ°åŒºå—é“¾

## ğŸ› ï¸ ç¯å¢ƒè¦æ±‚

- **Node.js**: v16+ 
- **npm**: v8+
- **Ganache**: GUI æˆ– CLI
- **MetaMask**: æµè§ˆå™¨æ‰©å±•
- **Git**: ç‰ˆæœ¬æ§åˆ¶

## ğŸš€ å®Œæ•´éƒ¨ç½²æµç¨‹

### ç¬¬1æ­¥ï¼šå…‹éš†é¡¹ç›®å¹¶å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd BlockchainTeam2

# å®‰è£…æ ¹ç›®å½•ä¾èµ– (Truffle ç›¸å…³)
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd frontend
npm install
cd ..
```

### ç¬¬2æ­¥ï¼šå¯åŠ¨ Ganache æœ¬åœ°åŒºå—é“¾

**é€‰é¡¹Aï¼šä½¿ç”¨ Ganache GUI**
1. å¯åŠ¨ Ganache GUI åº”ç”¨
2. åˆ›å»ºæ–°å·¥ä½œåŒºæˆ–å¿«é€Ÿå¯åŠ¨
3. ç¡®è®¤é…ç½®ï¼š
   - RPC æœåŠ¡å™¨ï¼š`http://127.0.0.1:7545`
   - ç½‘ç»œ IDï¼š`5777`
   - Gas é™åˆ¶ï¼š`6721975`

**é€‰é¡¹Bï¼šä½¿ç”¨ Ganache CLI**
```bash
npx ganache-cli --host 127.0.0.1 --port 7545 --networkId 5777
```

### ç¬¬3æ­¥ï¼šç¼–è¯‘å’Œéƒ¨ç½²æ™ºèƒ½åˆçº¦

```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
cd BlockchainTeam2

# ç¼–è¯‘åˆçº¦
npx truffle compile

# éƒ¨ç½²åˆçº¦åˆ°æœ¬åœ°ç½‘ç»œ
npx truffle migrate --reset --network development
```

**éƒ¨ç½²æˆåŠŸåä¼šæ˜¾ç¤º**ï¼š
```
ğŸ“‹ åˆçº¦åœ°å€æ±‡æ€»:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GovStable:            0xae674a265726C81443040031069D92F2Fc4D4b48 â”‚
â”‚ InsuranceRegistry:    0x536C72c7BA165C80d07dD1472E7058ce95436624 â”‚
â”‚ HospitalBillContract: 0xB3C9506462D66ee14D8d9516bC86Edf8DA07894B â”‚
â”‚ ReimbursementContract:0x3AB2f521feb2ba4fd8869E220039b14932AeA145 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
éœ€è¦å°†ä»¥ä¸Šå†…å®¹å¤åˆ¶åˆ°contract.jsä¸‹

### ç¬¬4æ­¥ï¼šé…ç½® MetaMask

1. **æ·»åŠ  Ganache ç½‘ç»œ**ï¼š
   - æ‰“å¼€ MetaMask â†’ ç½‘ç»œ â†’ æ·»åŠ ç½‘ç»œ â†’ æ‰‹åŠ¨æ·»åŠ 
   - ç½‘ç»œåç§°ï¼š`Ganache Local`
   - RPC URLï¼š`http://127.0.0.1:7545`
   - é“¾ IDï¼š`5777`
   - è´§å¸ç¬¦å·ï¼š`ETH`

2. **å¯¼å…¥æµ‹è¯•è´¦æˆ·**ï¼š
   - ä» Ganache å¤åˆ¶ä»¥ä¸‹è´¦æˆ·çš„ç§é’¥å¹¶å¯¼å…¥åˆ° MetaMaskï¼š
     - `accounts[0]` - éƒ¨ç½²è€…è´¦æˆ·
     - `accounts[1]` - ğŸ›ï¸ æ”¿åºœç®¡ç†å‘˜
     - `accounts[2]` - ğŸ¥ åŒ»é™¢ç®¡ç†å‘˜  
     - `accounts[3]` - ğŸ’¸ æŠ¥é”€ç®¡ç†å‘˜
     - `accounts[4]` - ğŸ‘¤ æµ‹è¯•å¸‚æ°‘1
     - `accounts[5]` - ğŸ‘¤ æµ‹è¯•å¸‚æ°‘2

### ç¬¬5æ­¥ï¼šå¯åŠ¨å‰ç«¯åº”ç”¨

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯å°†åœ¨ `http://localhost:5173` å¯åŠ¨ã€‚

## ğŸ§ª å®Œæ•´æµ‹è¯•æµç¨‹

### æµ‹è¯•å‰å‡†å¤‡

1. **ç¡®è®¤å‰ç«¯å·²å¯åŠ¨**ï¼šè®¿é—® http://localhost:5173
2. **MetaMask ç½‘ç»œ**ï¼šç¡®è®¤å·²è¿æ¥åˆ° Ganache Local
3. **è´¦æˆ·ä½™é¢**ï¼šç¡®è®¤æµ‹è¯•è´¦æˆ·æœ‰è¶³å¤Ÿçš„ ETH

### é˜¶æ®µä¸€ï¼šæ”¿åºœç®¡ç† (Government Portal)

**ä½¿ç”¨è´¦æˆ·**ï¼šæ”¿åºœç®¡ç†å‘˜ (`accounts[1]`)

1. **è¿æ¥é’±åŒ…**ï¼š
   - åœ¨ MetaMask ä¸­åˆ‡æ¢åˆ°æ”¿åºœç®¡ç†å‘˜è´¦æˆ·
   - ç‚¹å‡»"è¿æ¥é’±åŒ…"æŒ‰é’®

2. **è¿›å…¥æ”¿åºœé—¨æˆ·**ï¼š
   - ç‚¹å‡»å¯¼èˆªæ "æ”¿åºœé—¨æˆ·"
   - åº”è¯¥èƒ½æ­£å¸¸è®¿é—®ï¼Œä¸æ˜¾ç¤ºæƒé™é”™è¯¯

3. **åˆ›å»ºä¿é™©è®¡åˆ’**ï¼š
   ```
   è®¡åˆ’ID: 1
   è‡ªä»˜æ¯”ä¾‹: 1000 (10%)
   å…èµ”é¢: 0.1 (ETH)
   è¦†ç›–ä¸Šé™: 10 (ETH)
   ```

4. **æ³¨å†Œå¸‚æ°‘**ï¼š
   - å¸‚æ°‘åœ°å€ï¼šä½¿ç”¨ `accounts[4]` çš„åœ°å€
   - è®¡åˆ’ID: 1

### é˜¶æ®µäºŒï¼šåŒ»é™¢ç®¡ç† (Hospital Portal)

**ä½¿ç”¨è´¦æˆ·**ï¼šåŒ»é™¢ç®¡ç†å‘˜ (`accounts[2]`)

1. **åˆ‡æ¢è´¦æˆ·**ï¼š
   - MetaMask åˆ‡æ¢åˆ°åŒ»é™¢ç®¡ç†å‘˜
   - åˆ·æ–°é¡µé¢å¹¶é‡æ–°è¿æ¥

2. **è¿›å…¥åŒ»é™¢é—¨æˆ·**ï¼š
   - ç‚¹å‡»"åŒ»é™¢é—¨æˆ·"

3. **åˆ›å»ºæ‚£è€…è´¦å•**ï¼š
   ```
   æ‚£è€…åœ°å€: accounts[4] çš„åœ°å€
   æœåŠ¡ä»£ç : 1001
   è´¦å•é‡‘é¢: 1 (ETH)
   æ–‡æ¡£å“ˆå¸Œ: ä»»æ„32å­—èŠ‚å“ˆå¸Œå€¼
   ```

### é˜¶æ®µä¸‰ï¼šå¸‚æ°‘æŸ¥çœ‹ (Dashboard)

**ä½¿ç”¨è´¦æˆ·**ï¼šæµ‹è¯•å¸‚æ°‘1 (`accounts[4]`)

1. **åˆ‡æ¢åˆ°å¸‚æ°‘è´¦æˆ·**
2. **æŸ¥çœ‹ä»ªè¡¨æ¿**ï¼š
   - ä¸ªäººä¿é™©ä¿¡æ¯
   - è´¦å•åˆ—è¡¨
   - æŠ¥é”€è®°å½•

### é˜¶æ®µå››ï¼šæŠ¥é”€å¤„ç† (Reimbursement Portal)

**ä½¿ç”¨è´¦æˆ·**ï¼šæŠ¥é”€ç®¡ç†å‘˜ (`accounts[3]`)

1. **åˆ‡æ¢åˆ°æŠ¥é”€ç®¡ç†å‘˜**
2. **è¿›å…¥æŠ¥é”€é—¨æˆ·**
3. **å¤„ç†æŠ¥é”€ç”³è¯·**ï¼š
   - æŸ¥çœ‹å¾…å¤„ç†è´¦å•
   - ç‚¹å‡»"å¤„ç†æŠ¥é”€"
   - ç¡®è®¤äº¤æ˜“

4. **éªŒè¯ç»“æœ**ï¼š
   - è´¦å•çŠ¶æ€å˜ä¸º"å·²æŠ¥é”€"
   - GOV ä»£å¸è‡ªåŠ¨è½¬è´¦ç»™å¸‚æ°‘

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. æƒé™é”™è¯¯ "Access denied"**
```bash
# è¿è¡Œè§’è‰²éªŒè¯è„šæœ¬
npx truffle exec get_roles.js --network development
# æ£€æŸ¥å‰ç«¯ contracts.js ä¸­çš„è§’è‰²å“ˆå¸Œå€¼æ˜¯å¦åŒ¹é…
```

**2. åˆçº¦è°ƒç”¨å¤±è´¥**
- æ£€æŸ¥ MetaMask æ˜¯å¦è¿æ¥æ­£ç¡®ç½‘ç»œ
- ç¡®è®¤ Ganache æ­£åœ¨è¿è¡Œ
- éªŒè¯åˆçº¦åœ°å€é…ç½®

**3. å‰ç«¯æ— æ³•è¿æ¥**
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- ç¡®è®¤ç«¯å£ 5173 å’Œ 7545 æœªè¢«å ç”¨
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

**4. äº¤æ˜“å¤±è´¥**
- æ£€æŸ¥è´¦æˆ· ETH ä½™é¢
- å¢åŠ  Gas é™åˆ¶
- ç¡®è®¤ä½¿ç”¨æ­£ç¡®çš„è§’è‰²è´¦æˆ·

### é‡æ–°éƒ¨ç½²

å¦‚æœéœ€è¦å®Œå…¨é‡æ–°å¼€å§‹ï¼š

```bash
# 1. åœæ­¢æ‰€æœ‰æœåŠ¡
# 2. é‡å¯ Ganache
# 3. æ¸…ç†å¹¶é‡æ–°éƒ¨ç½²
npx truffle migrate --reset --network development
# 4. æ›´æ–°å‰ç«¯åˆçº¦åœ°å€ï¼ˆå¦‚æœåœ°å€æ”¹å˜ï¼‰
# 5. é‡å¯å‰ç«¯
cd frontend && npm run dev
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
BlockchainTeam2/
â”œâ”€â”€ Contracts/              # Solidity æ™ºèƒ½åˆçº¦
â”‚   â”œâ”€â”€ GovStable.sol       # ERC20 ä»£å¸åˆçº¦
â”‚   â”œâ”€â”€ InsuranceRegistry.sol
â”‚   â”œâ”€â”€ HospitalBillContract.sol
â”‚   â””â”€â”€ ReimbursementContract.sol
â”œâ”€â”€ migrations/             # Truffle éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ build/                  # ç¼–è¯‘è¾“å‡º (è‡ªåŠ¨ç”Ÿæˆ)
â”œâ”€â”€ frontend/               # React å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/          # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/       # React Context
â”‚   â”‚   â””â”€â”€ utils/          # å·¥å…·å‡½æ•°å’Œé…ç½®
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ truffle-config.js       # Truffle é…ç½®
â”œâ”€â”€ get_roles.js           # è§’è‰²å“ˆå¸Œè·å–å·¥å…·
â””â”€â”€ README.md
```

## ğŸ¯ ç³»ç»ŸåŠŸèƒ½

- **è§’è‰²ç®¡ç†**ï¼šåŸºäº OpenZeppelin AccessControl çš„æƒé™ç³»ç»Ÿ
- **ä¿é™©è®¡åˆ’**ï¼šæ”¿åºœå¯åˆ›å»ºå’Œç®¡ç†å¤šç§ä¿é™©è®¡åˆ’
- **å¸‚æ°‘æ³¨å†Œ**ï¼šå°†å¸‚æ°‘åˆ†é…åˆ°ä¸åŒä¿é™©è®¡åˆ’
- **åŒ»ç–—è´¦å•**ï¼šåŒ»é™¢å¯æäº¤æ‚£è€…åŒ»ç–—è´¦å•
- **è‡ªåŠ¨æŠ¥é”€**ï¼šæ™ºèƒ½è®¡ç®—æŠ¥é”€é‡‘é¢å¹¶é“¸é€  GOV ä»£å¸
- **çŠ¶æ€è·Ÿè¸ª**ï¼šå®Œæ•´çš„è´¦å•ç”Ÿå‘½å‘¨æœŸç®¡ç†

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **Truffle æ–‡æ¡£**ï¼šhttps://trufflesuite.com/docs/
- **OpenZeppelin**ï¼šhttps://docs.openzeppelin.com/
- **React æ–‡æ¡£**ï¼šhttps://react.dev/
- **ethers.js**ï¼šhttps://docs.ethers.org/

---
**ç‰ˆæœ¬**ï¼šv1.0.0  
**æœ€åæ›´æ–°**ï¼š2025å¹´11æœˆ1æ—¥  
**çŠ¶æ€**ï¼šâœ… ç”Ÿäº§å°±ç»ª